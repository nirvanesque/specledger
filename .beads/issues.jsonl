{"id":"sl-0cm","title":"Setup Phase","description":"Project initialization and basic auth package structure","status":"closed","priority":1,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:06.064628+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:43.535777+07:00","closed_at":"2026-02-09T15:48:43.535777+07:00","close_reason":"Setup phase complete","labels":["component:infra","phase:setup","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-0cm","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:06.068994+07:00","created_by":"pmnnhat"}]}
{"id":"sl-19x","title":"US2: Token-Based Login (CI/Headless)","description":"P2 - Users in CI/CD pipelines can authenticate with --token or --refresh flags","status":"closed","priority":2,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:10.531341+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:45.916611+07:00","closed_at":"2026-02-09T15:48:45.916611+07:00","close_reason":"US2 Token-Based Login implemented","labels":["component:auth","phase:us2","spec:003-authenticate-cli","story:US2"],"dependencies":[{"issue_id":"sl-19x","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:10.533544+07:00","created_by":"pmnnhat"},{"issue_id":"sl-19x","depends_on_id":"sl-96q","type":"blocks","created_at":"2026-02-09T15:47:23.758894+07:00","created_by":"pmnnhat"}]}
{"id":"sl-387","title":"Implement credential storage functions","description":"Functions to load, save, and delete credentials from disk","design":"In pkg/cli/auth/credentials.go: GetCredentialsPath() returns ~/.specledger/credentials.json, LoadCredentials() reads file, SaveCredentials() writes with 0600 perms, DeleteCredentials() removes file","acceptance_criteria":"Credentials persist at ~/.specledger/credentials.json with 0600 permissions","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:46.67158+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:32.659722+07:00","closed_at":"2026-02-09T15:48:32.659722+07:00","close_reason":"Implemented in pkg/cli/auth/credentials.go with 0600 perms","labels":["component:auth","fr:FR-006","phase:foundational","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-387","depends_on_id":"sl-96q","type":"parent-child","created_at":"2026-02-09T15:47:46.680787+07:00","created_by":"pmnnhat"}]}
{"id":"sl-5qf","title":"Implement cross-platform browser opening","description":"Open default browser on macOS, Linux, and Windows","design":"In pkg/cli/auth/browser.go: OpenBrowser(url) detects OS via runtime.GOOS, uses open (macOS), xdg-open (Linux), cmd /c start (Windows)","acceptance_criteria":"Browser opens on all three major platforms","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:58.434477+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:34.454611+07:00","closed_at":"2026-02-09T15:48:34.454611+07:00","close_reason":"Implemented in pkg/cli/auth/browser.go","labels":["component:auth","fr:FR-011","spec:003-authenticate-cli","story:US1"],"dependencies":[{"issue_id":"sl-5qf","depends_on_id":"sl-wre","type":"parent-child","created_at":"2026-02-09T15:47:58.437434+07:00","created_by":"pmnnhat"}]}
{"id":"sl-6mc","title":"Implement sl auth logout command","description":"Sign out and remove stored credentials","design":"In pkg/cli/commands/auth.go: runLogout() checks if authenticated, deletes credentials file, shows confirmation with previous email","acceptance_criteria":"sl auth logout removes credentials file and confirms signout","status":"closed","priority":3,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:21.091076+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:38.037044+07:00","closed_at":"2026-02-09T15:48:38.037044+07:00","close_reason":"Implemented runLogout() in auth.go","labels":["component:cli","fr:FR-007","spec:003-authenticate-cli","story:US4"],"dependencies":[{"issue_id":"sl-6mc","depends_on_id":"sl-78q","type":"parent-child","created_at":"2026-02-09T15:48:21.09447+07:00","created_by":"pmnnhat"}]}
{"id":"sl-6vj","title":"US3: Check Authentication Status","description":"P2 - Users can verify authentication status and see account information","status":"closed","priority":2,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:11.589338+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:46.048572+07:00","closed_at":"2026-02-09T15:48:46.048572+07:00","close_reason":"US3 Check Status implemented","labels":["component:auth","phase:us3","spec:003-authenticate-cli","story:US3"],"dependencies":[{"issue_id":"sl-6vj","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:11.591281+07:00","created_by":"pmnnhat"},{"issue_id":"sl-6vj","depends_on_id":"sl-96q","type":"blocks","created_at":"2026-02-09T15:47:23.892092+07:00","created_by":"pmnnhat"}]}
{"id":"sl-76u","title":"Add auth command group to CLI","description":"Register sl auth command group with Cobra CLI framework","design":"Add VarAuthCmd to pkg/cli/commands/auth.go and register in main.go","acceptance_criteria":"sl auth --help shows available subcommands","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:36.498134+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:31.28457+07:00","closed_at":"2026-02-09T15:48:31.28457+07:00","close_reason":"Implemented in pkg/cli/commands/auth.go","labels":["component:cli","fr:FR-001","phase:setup","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-76u","depends_on_id":"sl-0cm","type":"parent-child","created_at":"2026-02-09T15:47:36.499976+07:00","created_by":"pmnnhat"}]}
{"id":"sl-78q","title":"US4: Logout and Clear Credentials","description":"P3 - Users can sign out and remove stored credentials","status":"closed","priority":3,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:12.604453+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:47.531017+07:00","closed_at":"2026-02-09T15:48:47.531017+07:00","close_reason":"US4 Logout implemented","labels":["component:auth","phase:us4","spec:003-authenticate-cli","story:US4"],"dependencies":[{"issue_id":"sl-78q","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:12.606387+07:00","created_by":"pmnnhat"},{"issue_id":"sl-78q","depends_on_id":"sl-96q","type":"blocks","created_at":"2026-02-09T15:47:24.02443+07:00","created_by":"pmnnhat"}]}
{"id":"sl-7x3","title":"CLI Authentication","description":"Browser-based OAuth-style authentication for the SpecLedger CLI, enabling users to sign in via browser and automatically capture credentials. Supports CI/headless environments with direct token authentication flags.","status":"closed","priority":1,"issue_type":"epic","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:46:55.418434+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:49.59441+07:00","closed_at":"2026-02-09T15:48:49.59441+07:00","close_reason":"CLI Authentication feature fully implemented with all 5 user stories","labels":["component:auth","component:cli","spec:003-authenticate-cli"]}
{"id":"sl-96q","title":"Foundational: Core Auth Infrastructure","description":"Core authentication infrastructure needed by all user stories: Credentials model, storage functions, environment configuration","status":"closed","priority":1,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:07.58527+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:43.676087+07:00","closed_at":"2026-02-09T15:48:43.676087+07:00","close_reason":"Foundational infrastructure complete","labels":["component:auth","phase:foundational","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-96q","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:07.586895+07:00","created_by":"pmnnhat"},{"issue_id":"sl-96q","depends_on_id":"sl-0cm","type":"blocks","created_at":"2026-02-09T15:47:22.275718+07:00","created_by":"pmnnhat"}]}
{"id":"sl-afl","title":"Add --refresh flag for refresh token login","description":"Support authenticating with refresh token that exchanges for access token","design":"In pkg/cli/commands/auth.go: Add --refresh flag to VarAuthLoginCmd, runRefreshTokenLogin() calls RefreshAccessToken() and saves result","acceptance_criteria":"sl auth login --refresh \u003ctoken\u003e exchanges for access token and stores credentials","status":"closed","priority":2,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:12.902558+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:36.097009+07:00","closed_at":"2026-02-09T15:48:36.097009+07:00","close_reason":"Implemented --refresh flag in auth.go","labels":["component:cli","fr:FR-005","spec:003-authenticate-cli","story:US2"],"dependencies":[{"issue_id":"sl-afl","depends_on_id":"sl-19x","type":"parent-child","created_at":"2026-02-09T15:48:12.905679+07:00","created_by":"pmnnhat"}]}
{"id":"sl-b04","title":"Implement sl auth refresh command","description":"Manually refresh access token using stored refresh token","design":"In pkg/cli/commands/auth.go: runRefresh() calls GetValidAccessToken() to force refresh, displays new token info","acceptance_criteria":"sl auth refresh obtains new access token and displays updated expiration","status":"closed","priority":3,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:24.950897+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:38.301971+07:00","closed_at":"2026-02-09T15:48:38.301971+07:00","close_reason":"Implemented runRefresh() in auth.go","labels":["component:cli","fr:FR-009","spec:003-authenticate-cli","story:US5"],"dependencies":[{"issue_id":"sl-b04","depends_on_id":"sl-ufh","type":"parent-child","created_at":"2026-02-09T15:48:24.953958+07:00","created_by":"pmnnhat"}]}
{"id":"sl-b6f","title":"Implement sl auth login command","description":"Main login command with browser-based authentication flow","design":"In pkg/cli/commands/auth.go: runLogin() starts CallbackServer, builds auth URL with callback param, opens browser, waits for callback (5min timeout), saves credentials. Shows manual auth instructions on callback failure.","acceptance_criteria":"sl auth login opens browser, captures callback, stores credentials, handles timeout gracefully","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:01.473444+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:34.597911+07:00","closed_at":"2026-02-09T15:48:34.597911+07:00","close_reason":"Implemented in pkg/cli/commands/auth.go runLogin()","labels":["component:cli","fr:FR-002","fr:FR-013","fr:FR-014","spec:003-authenticate-cli","story:US1"],"dependencies":[{"issue_id":"sl-b6f","depends_on_id":"sl-wre","type":"parent-child","created_at":"2026-02-09T15:48:01.478284+07:00","created_by":"pmnnhat"}]}
{"id":"sl-cl9","title":"Implement RefreshAccessToken HTTP client","description":"HTTP client to exchange refresh token for access token","design":"In pkg/cli/auth/client.go: RefreshAccessToken(refreshToken) POSTs to /api/cli/refresh, parses RefreshTokenResponse, returns new Credentials","acceptance_criteria":"Refresh token successfully exchanged for new access token via API","status":"closed","priority":2,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:08.198685+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:35.808098+07:00","closed_at":"2026-02-09T15:48:35.808098+07:00","close_reason":"Implemented in pkg/cli/auth/client.go","labels":["component:auth","fr:FR-005","spec:003-authenticate-cli","story:US2"],"dependencies":[{"issue_id":"sl-cl9","depends_on_id":"sl-19x","type":"parent-child","created_at":"2026-02-09T15:48:08.202428+07:00","created_by":"pmnnhat"}]}
{"id":"sl-fps","title":"Add --token flag for direct access token login","description":"Support authenticating with pre-obtained access token for CI/headless","design":"In pkg/cli/commands/auth.go: Add --token flag to VarAuthLoginCmd, runAccessTokenLogin() saves credentials with provided token","acceptance_criteria":"sl auth login --token \u003ctoken\u003e stores credentials without browser interaction","status":"closed","priority":2,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:10.414571+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:35.946856+07:00","closed_at":"2026-02-09T15:48:35.946856+07:00","close_reason":"Implemented --token flag in auth.go","labels":["component:cli","fr:FR-004","spec:003-authenticate-cli","story:US2"],"dependencies":[{"issue_id":"sl-fps","depends_on_id":"sl-19x","type":"parent-child","created_at":"2026-02-09T15:48:10.418354+07:00","created_by":"pmnnhat"}]}
{"id":"sl-idh","title":"Implement sl auth status command","description":"Display current authentication status and user information","design":"In pkg/cli/commands/auth.go: runStatus() loads credentials, displays signed in/out status, email, token expiration time, credentials path","acceptance_criteria":"sl auth status shows signed in/out status, email when authenticated, expiration info","status":"closed","priority":2,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:19.227873+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:37.899429+07:00","closed_at":"2026-02-09T15:48:37.899429+07:00","close_reason":"Implemented runStatus() in auth.go","labels":["component:cli","fr:FR-008","spec:003-authenticate-cli","story:US3"],"dependencies":[{"issue_id":"sl-idh","depends_on_id":"sl-6vj","type":"parent-child","created_at":"2026-02-09T15:48:19.231905+07:00","created_by":"pmnnhat"}]}
{"id":"sl-idn","title":"Implement GetValidAccessToken with auto-refresh","description":"Return valid access token, automatically refreshing if expired","design":"In pkg/cli/auth/client.go: GetValidAccessToken() loads credentials, returns if valid, refreshes if expired with refresh token, saves new credentials","acceptance_criteria":"Expired tokens are automatically refreshed when refresh token available","status":"closed","priority":3,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:48:23.907386+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:38.168332+07:00","closed_at":"2026-02-09T15:48:38.168332+07:00","close_reason":"Implemented GetValidAccessToken() in client.go","labels":["component:auth","fr:FR-010","spec:003-authenticate-cli","story:US5"],"dependencies":[{"issue_id":"sl-idn","depends_on_id":"sl-ufh","type":"parent-child","created_at":"2026-02-09T15:48:23.910579+07:00","created_by":"pmnnhat"}]}
{"id":"sl-ll7","title":"Implement CallbackServer for OAuth callback","description":"Local HTTP server to receive authentication tokens from browser","design":"In pkg/cli/auth/server.go: CallbackServer struct with port 2026, http.Server, net.Listener, result channel. Methods: NewCallbackServer(), Port(), CallbackURL(), Start(), WaitForCallback(timeout), Shutdown(), handleCallback()","acceptance_criteria":"Server starts on port 2026, receives GET/POST callbacks, supports CORS, redirects browser after callback","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:56.17937+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:34.305058+07:00","closed_at":"2026-02-09T15:48:34.305058+07:00","close_reason":"Implemented in pkg/cli/auth/server.go","labels":["component:auth","fr:FR-003","spec:003-authenticate-cli","story:US1"],"dependencies":[{"issue_id":"sl-ll7","depends_on_id":"sl-wre","type":"parent-child","created_at":"2026-02-09T15:47:56.183762+07:00","created_by":"pmnnhat"}]}
{"id":"sl-ocx","title":"Create pkg/cli/auth package structure","description":"Initialize the auth package directory structure for authentication functionality","design":"Create pkg/cli/auth/ directory with placeholder files","acceptance_criteria":"pkg/cli/auth/ exists with proper Go package","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:34.382527+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:31.136712+07:00","closed_at":"2026-02-09T15:48:31.136712+07:00","close_reason":"Implemented in pkg/cli/auth/","labels":["component:auth","fr:FR-001","phase:setup","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-ocx","depends_on_id":"sl-0cm","type":"parent-child","created_at":"2026-02-09T15:47:34.385557+07:00","created_by":"pmnnhat"}]}
{"id":"sl-ufh","title":"US5: Token Refresh","description":"P3 - Users can manually refresh expired access tokens","status":"closed","priority":3,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:13.633358+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:47.662132+07:00","closed_at":"2026-02-09T15:48:47.662132+07:00","close_reason":"US5 Token Refresh implemented","labels":["component:auth","phase:us5","spec:003-authenticate-cli","story:US5"],"dependencies":[{"issue_id":"sl-ufh","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:13.635414+07:00","created_by":"pmnnhat"},{"issue_id":"sl-ufh","depends_on_id":"sl-96q","type":"blocks","created_at":"2026-02-09T15:47:24.157508+07:00","created_by":"pmnnhat"}]}
{"id":"sl-wre","title":"US1: Browser-Based Login","description":"P1 - Users can authenticate via browser, with automatic credential capture via local callback server","status":"closed","priority":1,"issue_type":"feature","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:08.782484+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:45.784517+07:00","closed_at":"2026-02-09T15:48:45.784517+07:00","close_reason":"US1 Browser-Based Login implemented","labels":["component:auth","phase:us1","spec:003-authenticate-cli","story:US1"],"dependencies":[{"issue_id":"sl-wre","depends_on_id":"sl-7x3","type":"parent-child","created_at":"2026-02-09T15:47:08.78426+07:00","created_by":"pmnnhat"},{"issue_id":"sl-wre","depends_on_id":"sl-96q","type":"blocks","created_at":"2026-02-09T15:47:23.624671+07:00","created_by":"pmnnhat"}]}
{"id":"sl-y1w","title":"Implement Credentials struct and methods","description":"Core Credentials type for storing authentication tokens and user info","design":"In pkg/cli/auth/credentials.go: Credentials struct with access_token, refresh_token, expires_in, created_at, user_email, user_id. Methods: IsExpired(), ExpiresAt(), IsValid()","acceptance_criteria":"Credentials struct serializes to JSON, IsExpired correctly detects expiration","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:44.197504+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:32.522023+07:00","closed_at":"2026-02-09T15:48:32.522023+07:00","close_reason":"Implemented in pkg/cli/auth/credentials.go","labels":["component:auth","fr:FR-006","phase:foundational","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-y1w","depends_on_id":"sl-96q","type":"parent-child","created_at":"2026-02-09T15:47:44.199954+07:00","created_by":"pmnnhat"}]}
{"id":"sl-yw3","title":"Implement environment-based URL configuration","description":"Support production vs development URL configuration via environment variables","design":"In pkg/cli/commands/auth.go: getAuthURL() checks SPECLEDGER_AUTH_URL, SPECLEDGER_ENV env vars. In pkg/cli/auth/client.go: getAPIURL() for API endpoint configuration","acceptance_criteria":"SPECLEDGER_ENV=dev uses localhost URLs, otherwise production URLs","status":"closed","priority":1,"issue_type":"task","owner":"pmnhat.17ck1@gmail.com","created_at":"2026-02-09T15:47:48.91616+07:00","created_by":"pmnnhat","updated_at":"2026-02-09T15:48:32.82311+07:00","closed_at":"2026-02-09T15:48:32.82311+07:00","close_reason":"Implemented in auth.go and client.go","labels":["component:auth","fr:FR-012","phase:foundational","spec:003-authenticate-cli"],"dependencies":[{"issue_id":"sl-yw3","depends_on_id":"sl-96q","type":"parent-child","created_at":"2026-02-09T15:47:48.920433+07:00","created_by":"pmnnhat"}]}
