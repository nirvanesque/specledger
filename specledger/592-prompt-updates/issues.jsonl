{"id":"SL-e353a6","title":"Improve SpecLedger Command Prompts","description":"Update three core SpecLedger command prompts (specify, tasks, implement) to improve dependency handling, issue quality, and Definition of Done verification. Changes apply to both .claude/commands/ and pkg/embedded/skills/commands/.","status":"open","priority":1,"issue_type":"epic","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:11:06.522319+07:00","updated_at":"2026-02-20T01:11:06.522319+07:00","labels":["spec:592-prompt-updates","component:prompts"]}
{"id":"SL-b7212a","title":"US1: Reference Dependencies During Specification","description":"Update specledger.specify.md to detect and load dependency references using explicit syntax (deps:alias or @alias). Covers FR-001, FR-002, FR-003.","status":"open","priority":1,"issue_type":"feature","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:11:30.483452+07:00","updated_at":"2026-02-20T01:11:30.483452+07:00","labels":["spec:592-prompt-updates","phase:us1","story:US1","component:prompts"]}
{"id":"SL-1629bc","title":"US2: Generate Descriptive, Complete Issues","description":"Update specledger.tasks.md to generate issues with structured content, populate DoD from acceptance criteria, add DoD summary section, and handle errors gracefully. Covers FR-004, FR-005, FR-006, FR-007.","status":"open","priority":1,"issue_type":"feature","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:11:39.095535+07:00","updated_at":"2026-02-20T01:11:39.095535+07:00","labels":["spec:592-prompt-updates","phase:us2","story:US2","component:prompts"]}
{"id":"SL-d9921b","title":"US3: Utilize Definition of Done During Implementation","description":"Update specledger.implement.md to verify DoD items before closing issues, with automated verification where possible and interactive fallback. Covers FR-008, FR-009, FR-010.","status":"open","priority":1,"issue_type":"feature","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:11:48.858666+07:00","updated_at":"2026-02-20T01:11:48.858666+07:00","labels":["spec:592-prompt-updates","phase:us3","story:US3","component:prompts"]}
{"id":"SL-7b8790","title":"Polish: Verification and Consistency","description":"Verify prompt consistency between .claude/commands/ and pkg/embedded/skills/commands/, run manual tests from quickstart.md. Covers FR-011.","status":"open","priority":2,"issue_type":"feature","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:11:58.889867+07:00","updated_at":"2026-02-20T01:11:58.889867+07:00","labels":["spec:592-prompt-updates","phase:polish","component:prompts"]}
{"id":"SL-1f8167","title":"Add dependency detection to specledger.specify.md","description":"PROBLEM: Users need to reference external dependencies in feature descriptions, but the specify command doesn't detect or load them.\n\nSOLUTION: Add a dependency detection section to the specify command prompt that:\n1. Scans user description for patterns: deps:alias-name or @alias-name\n2. Runs sl deps list to check if dependency exists\n3. Loads content from cache if exists\n4. Displays helpful message if not found\n\nFILES: .claude/commands/specledger.specify.md\nINPUT: User feature description with optional deps: or @ syntax\nOUTPUT: Spec with loaded dependency context or helpful error message\n\nDEFINITION OF DONE:\n- [ ] Pattern matching for deps:alias and @alias syntax works\n- [ ] sl deps list is called to check dependency existence\n- [ ] Content loads from ~/.specledger/cache/\u003calias\u003e/ when exists\n- [ ] Error message displayed when dependency not found","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:12:36.276545+07:00","updated_at":"2026-02-20T01:15:32.352634+07:00","blocks":["SL-f39984"],"labels":["spec:592-prompt-updates","story:US1","component:prompts","fr:FR-001","fr:FR-002","fr:FR-003"]}
{"id":"SL-f39984","title":"Sync specledger.specify.md to embedded templates","description":"PROBLEM: Changes to .claude/commands/specledger.specify.md must be mirrored to embedded templates so users get the same behavior.\n\nSOLUTION: Copy the updated content from .claude/commands/specledger.specify.md to pkg/embedded/skills/commands/specledger.specify.md, ensuring identical content.\n\nFILES: \n- Source: .claude/commands/specledger.specify.md\n- Target: pkg/embedded/skills/commands/specledger.specify.md\n\nDEFINITION OF DONE:\n- [ ] Files are identical (no diff)\n- [ ] No content left behind","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:12:47.652779+07:00","updated_at":"2026-02-20T01:15:32.352635+07:00","blocked_by":["SL-1f8167"],"labels":["spec:592-prompt-updates","story:US1","component:prompts","fr:FR-011"]}
{"id":"SL-337c9b","title":"Add issue content structure to specledger.tasks.md","description":"PROBLEM: Generated issues lack consistent structure, making them hard to understand and implement.\n\nSOLUTION: Add explicit issue content structure requirements to the tasks command prompt:\n- title: Concise summary (under 80 chars)\n- description: Problem statement (WHY this matters)\n- design: Implementation details (HOW/WHERE to build)\n- acceptance: Success criteria (WHAT done looks like)\n\nFILES: .claude/commands/specledger.tasks.md\n\nDEFINITION OF DONE:\n- [ ] Issue structure section clearly defines all required fields\n- [ ] Examples show complete issue format\n- [ ] Field purposes are explained","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:13:01.109516+07:00","updated_at":"2026-02-20T01:15:32.361735+07:00","blocks":["SL-0aeb93"],"labels":["spec:592-prompt-updates","story:US2","component:prompts","fr:FR-004"]}
{"id":"SL-eaef67","title":"Add DoD population from acceptance criteria","description":"PROBLEM: Issues are created without definition_of_done items, leaving implementers without clear completion criteria.\n\nSOLUTION: Add section to tasks command that:\n1. Parses acceptance criteria from spec.md\n2. Converts each 'Then' clause to a DoD checklist item\n3. Includes DoD items in --definition-of-done when creating issues\n\nFILES: .claude/commands/specledger.tasks.md\n\nDEFINITION OF DONE:\n- [ ] DoD items derived from acceptance criteria\n- [ ] Each 'Then' clause becomes a checklist item\n- [ ] DoD items included in issue creation","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:13:13.096934+07:00","updated_at":"2026-02-20T01:15:32.371192+07:00","blocks":["SL-0aeb93"],"labels":["spec:592-prompt-updates","story:US2","component:prompts","fr:FR-005"]}
{"id":"SL-76e443","title":"Add DoD summary section to tasks.md template","description":"PROBLEM: DoD items are stored in issues but not visible in tasks.md summary.\n\nSOLUTION: Add a DoD Summary section to tasks.md template that lists DoD items for each issue in a table format:\n| Issue ID | DoD Items |\n|----------|-----------|\n| SL-xxxxx | - Item 1\\n- Item 2 |\n\nFILES: .claude/commands/specledger.tasks.md\n\nDEFINITION OF DONE:\n- [ ] DoD Summary section added to tasks.md template\n- [ ] Table format with Issue ID and DoD Items columns\n- [ ] Items are referenceable by issue ID","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:13:28.730649+07:00","updated_at":"2026-02-20T01:15:32.380255+07:00","blocks":["SL-0aeb93"],"labels":["spec:592-prompt-updates","story:US2","component:prompts","fr:FR-006"]}
{"id":"SL-a2574d","title":"Add error handling section to specledger.tasks.md","description":"PROBLEM: sl issue create and sl issue link commands can fail with confusing errors.\n\nSOLUTION: Add error handling section that:\n1. Sanitizes special characters in description (escape quotes, newlines)\n2. Retries with sanitized parameters on failure\n3. Displays clear error with specific issue and remediation if still failing\n\nFILES: .claude/commands/specledger.tasks.md\n\nDEFINITION OF DONE:\n- [ ] Error handling section added after Example CLI Calls\n- [ ] Sanitization steps documented\n- [ ] Retry logic explained\n- [ ] Clear error message format defined","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:13:42.082369+07:00","updated_at":"2026-02-20T01:15:32.392817+07:00","blocks":["SL-0aeb93"],"labels":["spec:592-prompt-updates","story:US2","component:prompts","fr:FR-007"]}
{"id":"SL-0aeb93","title":"Sync specledger.tasks.md to embedded templates","description":"PROBLEM: Changes to .claude/commands/specledger.tasks.md must be mirrored to embedded templates.\n\nSOLUTION: Copy the updated content from .claude/commands/specledger.tasks.md to pkg/embedded/skills/commands/specledger.tasks.md, ensuring identical content.\n\nFILES:\n- Source: .claude/commands/specledger.tasks.md\n- Target: pkg/embedded/skills/commands/specledger.tasks.md\n\nDEFINITION OF DONE:\n- [ ] Files are identical (no diff)\n- [ ] All US2 changes included","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:13:54.300804+07:00","updated_at":"2026-02-20T01:15:32.392817+07:00","blocked_by":["SL-337c9b","SL-eaef67","SL-76e443","SL-a2574d"],"labels":["spec:592-prompt-updates","story:US2","component:prompts","fr:FR-011"]}
{"id":"SL-b7a777","title":"Add DoD verification section to specledger.implement.md","description":"PROBLEM: Tasks can be closed without verifying Definition of Done items.\n\nSOLUTION: Add DoD verification section before completion validation that:\n1. Reads issue's definition_of_done field via sl issue show \u003cid\u003e\n2. For each DoD item, attempts automated verification\n3. Falls back to interactive confirmation for non-automatable items\n4. Displays failed items with reasons before requiring --force\n\nFILES: .claude/commands/specledger.implement.md\n\nDEFINITION OF DONE:\n- [ ] DoD verification section added before Completion validation\n- [ ] Automated verification patterns documented\n- [ ] Interactive fallback described\n- [ ] Failed verification handling defined","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:14:08.10663+07:00","updated_at":"2026-02-20T01:15:32.403234+07:00","blocks":["SL-7edfe9"],"labels":["spec:592-prompt-updates","story:US3","component:prompts","fr:FR-008","fr:FR-009","fr:FR-010"]}
{"id":"SL-7edfe9","title":"Sync specledger.implement.md to embedded templates","description":"PROBLEM: Changes to .claude/commands/specledger.implement.md must be mirrored to embedded templates.\n\nSOLUTION: Copy the updated content from .claude/commands/specledger.implement.md to pkg/embedded/skills/commands/specledger.implement.md, ensuring identical content.\n\nFILES:\n- Source: .claude/commands/specledger.implement.md\n- Target: pkg/embedded/skills/commands/specledger.implement.md\n\nDEFINITION OF DONE:\n- [ ] Files are identical (no diff)\n- [ ] All US3 changes included","status":"open","priority":1,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:14:21.865906+07:00","updated_at":"2026-02-20T01:15:32.403234+07:00","blocked_by":["SL-b7a777"],"labels":["spec:592-prompt-updates","story:US3","component:prompts","fr:FR-011"]}
{"id":"SL-1571dc","title":"Verify prompt file consistency","description":"PROBLEM: Dev and embedded prompts may drift apart, causing inconsistent behavior.\n\nSOLUTION: Run diff commands to verify all prompt files are identical:\n- diff .claude/commands/specledger.specify.md pkg/embedded/skills/commands/specledger.specify.md\n- diff .claude/commands/specledger.tasks.md pkg/embedded/skills/commands/specledger.tasks.md\n- diff .claude/commands/specledger.implement.md pkg/embedded/skills/commands/specledger.implement.md\n\nFILES: All 6 prompt files\n\nDEFINITION OF DONE:\n- [ ] All three diff commands show no differences\n- [ ] Report generated showing verification results","status":"open","priority":2,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:14:44.127448+07:00","updated_at":"2026-02-20T01:15:32.412508+07:00","blocks":["SL-610a8c"],"labels":["spec:592-prompt-updates","phase:polish","component:prompts","fr:FR-011"]}
{"id":"SL-610a8c","title":"Run manual tests from quickstart.md","description":"PROBLEM: Need to verify all prompt changes work correctly in practice.\n\nSOLUTION: Execute test scenarios from quickstart.md:\n1. Scenario 1: Dependency detection in /specledger.specify\n2. Scenario 2: Issue structure in /specledger.tasks\n3. Scenario 3: Error handling in /specledger.tasks\n4. Scenario 4: Automated DoD verification in /specledger.implement\n5. Scenario 5: Interactive DoD confirmation\n6. Scenario 6: Prompt consistency\n\nFILES: specledger/592-prompt-updates/quickstart.md\n\nDEFINITION OF DONE:\n- [ ] All 6 scenarios pass\n- [ ] Validation checklist completed\n- [ ] Any issues documented","status":"open","priority":2,"issue_type":"task","spec_context":"592-prompt-updates","created_at":"2026-02-20T01:15:12.171482+07:00","updated_at":"2026-02-20T01:15:32.412508+07:00","blocked_by":["SL-1571dc"],"labels":["spec:592-prompt-updates","phase:polish","component:prompts"]}
